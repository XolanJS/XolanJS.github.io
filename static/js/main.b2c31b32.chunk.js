(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),l=n(3),i=n.n(l),r=(n(9),n(1));const c=0,o=1,m=["O","X"],u=0,h=1,p=e=>e.map((e,t)=>[e,t]).filter(e=>null===e[0]),d=e=>p(e).length>0,y=(e,t)=>e+Math.floor(Math.random()*(t-e)),T=(e,t,n)=>[...e.slice(0,t),n,...e.slice(t+1,e.length)],g=(e,t,n,a)=>{const s=((e,t)=>{const n=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let a=0;a<n.length;a++){const s=Object(r.a)(n[a],3),l=s[0],i=s[1],c=s[2];if(null!==e[l]&&e[l]===e[i]&&e[l]===e[c])return e[l]===t?10:-10}return 0})(e,n);if(10===s)return s-t;if(-10===s)return s+t;if(!d(e))return 0;const l=e.length;let i;if(a){i=-1e3;for(let s=0;s<l;s++){if(null===e[s]){const l=T(e,s,n);i=Math.max(i,g(l,t+1,n,!a))}}}else{i=1e3;for(let s=0;s<l;s++){if(null===e[s]){const l=T(e,s,1-n);i=Math.min(i,g(l,t+1,n,!a))}}}return i},E=s.a.createContext();class f extends a.Component{constructor(...e){super(...e),this.initState={gameType:c,currentIcon:y(0,2),playerTurn:y(0,2),cells:new Array(9).fill(null),gameState:{position:"",iconType:null,isTie:null}},this.state={gameType:this.initState.gameType,currentIcon:this.initState.currentIcon,playerTurn:this.initState.playerTurn,cells:this.initState.cells,gameState:this.initState.gameState,changeType:e=>{this.state.gameType!==e&&this.initNewGame(e)},humanPlay:e=>{this.humanPlay(e)},newGame:()=>{this.initNewGame(this.state.gameType)}},this.initGame=()=>{this.state.gameType===o&&this.state.playerTurn===h&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{const e=(e=>{const t=p(e);if(t.length>0){return t[y(0,t.length)][1]}return null})(this.state.cells);this.computerPlay(e)},500))},this.initNewGame=(e=this.initState.gameType)=>{this.setState(()=>({gameType:e,currentIcon:y(0,2),playerTurn:y(0,2),cells:this.initState.cells,gameState:this.initState.gameState}),()=>{this.initGame()})},this.applyState=(e,t)=>{const n=e.cells,a=1-e.currentIcon,s=1-e.playerTurn,l=T(n,t,e.currentIcon);return{gameState:(e=>{const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];let n="";for(let a=0;a<t.length;a++){const s=Object(r.a)(t[a],3),l=s[0],i=s[1],c=s[2];if(null!==e[l]&&e[l]===e[i]&&e[l]===e[c])return n=a>=0&&a<=2?"h h".concat(a):a>=3&&a<=5?"v v".concat(a-3):"d".concat(a-6),{position:n,iconType:e[l],isTie:null}}return{position:"",iconType:null,isTie:!d(e)||null}})(l),currentIcon:a,playerTurn:s,cells:l}},this.humanPlay=e=>{""!==this.state.gameState.position||null!==this.state.cells[e]||this.state.gameType!==c&&this.state.playerTurn!==u||this.setState(t=>this.applyState(t,e),()=>{""===this.state.gameState.position&&this.state.gameType===o&&this.state.playerTurn===h&&setTimeout(()=>{this.makeAIMove()},500)})},this.computerPlay=e=>{""===this.state.gameState.position&&null===this.state.cells[e]&&this.state.gameType===o&&this.state.playerTurn===h&&this.setState(t=>this.applyState(t,e))},this.makeAIMove=()=>{const e=((e,t)=>{let n=-1e3,a=null;const s=e.length;for(let l=0;l<s;l++){if(null===e[l]){const s=T(e,l,t),i=g(s,0,t,!1);i>n&&(n=i,a=l)}}return a})(this.state.cells,this.state.currentIcon);null!==e&&this.computerPlay(e)}}componentDidMount(){this.initGame()}render(){return s.a.createElement(E.Provider,{value:this.state},this.props.children)}}n(10);const x=e=>{const t=e.value,n=e.name;return s.a.createElement(E.Consumer,null,e=>s.a.createElement("li",{onClick:()=>e.changeType(t),className:t===e.gameType?"active":""},n))};class S extends a.Component{render(){return s.a.createElement("header",{className:"header"},s.a.createElement("h1",null,"\u041a\u0440\u0435\u0441\u0442\u0438\u043a\u0438-\u041d\u043e\u043b\u0438\u043a\u0438"),s.a.createElement("ul",null,s.a.createElement(x,{value:c,name:"2 \u0418\u0433\u0440\u043e\u043a\u0430"}),s.a.createElement(x,{value:o,name:"\u041f\u0440\u043e\u0442\u0438\u0432 \u0418\u0418"})),s.a.createElement("div",null,s.a.createElement("button",{onClick:()=>this.context.newGame()},"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430")))}}S.contextType=E;var v=S;n(11);const b=e=>s.a.createElement(E.Consumer,null,t=>{const n=t.cells[e.index],a=null!==n?m[n]:"I",l="I"!==a?"done":"";return s.a.createElement("button",{className:"cell cell-".concat(e.index," ").concat(l),onClick:()=>t.humanPlay(e.index)},a)});class I extends a.Component{constructor(e){super(e),this.boardRef=s.a.createRef()}componentDidUpdate(){""!==this.context.gameState.position?setTimeout(()=>{this.boardRef.current.classList.add("full")},50):this.boardRef.current.classList.remove("full")}render(){return s.a.createElement("div",{className:"board ".concat(this.context.gameState.position),ref:this.boardRef},s.a.createElement("div",{className:"board-row"},s.a.createElement(b,{index:0}),s.a.createElement(b,{index:1}),s.a.createElement(b,{index:2})),s.a.createElement("div",{className:"board-row"},s.a.createElement(b,{index:3}),s.a.createElement(b,{index:4}),s.a.createElement(b,{index:5})),s.a.createElement("div",{className:"board-row"},s.a.createElement(b,{index:6}),s.a.createElement(b,{index:7}),s.a.createElement(b,{index:8})))}}I.contextType=E;class N extends a.Component{render(){let e="";const t=this.context.currentIcon;return e=this.context.gameState.isTie?"Tie!":this.context.gameType===c?""===this.context.gameState.position?"\u0425\u043e\u0434 \u0438\u0433\u0440\u043e\u043a\u0430(".concat(m[t],")"):"\u0418\u0433\u0440\u043e\u043a(".concat(m[1-t],") \u043f\u043e\u0431\u0435\u0434\u0438\u043b!"):""===this.context.gameState.position?this.context.playerTurn===u?"\u0422\u0432\u043e\u0439 \u0445\u043e\u0434":"\u0425\u043e\u0434 \u0418\u0418":this.context.playerTurn===u?"\u0418\u0418 \u043f\u043e\u0431\u0435\u0434\u0438\u043b!":"\u0422\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b!",s.a.createElement("main",{className:"main"},s.a.createElement("div",{className:"info"},e),s.a.createElement(I,null))}}N.contextType=E;var w=N;n(12);class C extends a.Component{render(){return s.a.createElement(f,null,s.a.createElement("div",{className:"app"},s.a.createElement(v,null),s.a.createElement(w,null)))}}var G=C;i.a.render(s.a.createElement(G,null),document.getElementById("root"))}],[[4,1,2]]]);
//# sourceMappingURL=main.b2c31b32.chunk.js.map